# Техническое задание: Онлайн-кинотеатр с персонализированными рекомендациями

## Введение

Веб-приложение представляет собой онлайн-кинотеатр с системой персонализированных рекомендаций фильмов. Система анализирует предпочтения пользователя и предлагает фильмы на основе его интересов, показывает доступность фильмов на различных платформах для просмотра, позволяет отмечать просмотренные фильмы с оценками и отображает детальную статистику просмотров.

**Тип проекта:** Школьный проект  
**Целевая аудитория:** Пользователи, желающие получать персонализированные рекомендации фильмов

## Глоссарий

- **Система** — веб-приложение онлайн-кинотеатра с рекомендациями
- **Пользователь** — зарегистрированный пользователь системы
- **Фильм** — кинематографическое произведение из базы данных TMDB
- **Рекомендация** — фильм, предложенный системой на основе предпочтений пользователя
- **Просмотренный фильм** — фильм, отмеченный пользователем как просмотренный
- **Избранное** — список фильмов, сохранённых пользователем для быстрого доступа
- **Оценка** — числовое значение от 1 до 10, присвоенное пользователем фильму
- **TMDB** — The Movie Database API, источник данных о фильмах
- **Платформа просмотра** — онлайн-сервис, где доступен фильм для просмотра
- **Статистика** — аналитические данные о просмотрах пользователя
- **Тема оформления** — визуальная схема интерфейса (светлая или тёмная)

## Требования

### Требование 1: Регистрация и авторизация пользователей

**Пользовательская история:** Как новый пользователь, я хочу зарегистрироваться в системе и войти в свой аккаунт, чтобы получать персонализированные рекомендации и сохранять свои данные.

#### Критерии приёмки

1. КОГДА пользователь заполняет форму регистрации с валидными данными (email, пароль), ТОГДА Система ДОЛЖНА создать новый аккаунт и сохранить данные в базе Supabase
2. КОГДА пользователь вводит корректные учётные данные на странице входа, ТОГДА Система ДОЛЖНА авторизовать пользователя и предоставить доступ к персональному профилю
3. КОГДА пользователь вводит некорректные учётные данные, ТОГДА Система ДОЛЖНА отклонить попытку входа и отобразить сообщение об ошибке
4. КОГДА пользователь нажимает кнопку выхода, ТОГДА Система ДОЛЖНА завершить сеанс и перенаправить на страницу входа
5. КОГДА пользователь не авторизован, ТОГДА Система ДОЛЖНА ограничить доступ к функциям приложения и показать только страницу входа/регистрации

### Требование 2: Настройка начальных предпочтений

**Пользовательская история:** Как новый пользователь, я хочу указать свои предпочтения при первом входе, чтобы система могла сразу предложить мне подходящие фильмы.

#### Критерии приёмки

1. КОГДА пользователь впервые входит в систему после регистрации, ТОГДА Система ДОЛЖНА отобразить форму выбора предпочтений
2. КОГДА пользователь выбирает любимые жанры из предложенного списка, ТОГДА Система ДОЛЖНА сохранить выбранные жанры в профиле пользователя
3. КОГДА пользователь указывает любимых актёров или режиссёров, ТОГДА Система ДОЛЖНА сохранить эти данные для формирования рекомендаций
4. КОГДА пользователь завершает настройку предпочтений, ТОГДА Система ДОЛЖНА сохранить все данные и перенаправить на главную страницу с рекомендациями
5. КОГДА пользователь пропускает настройку предпочтений, ТОГДА Система ДОЛЖНА показать общие популярные рекомендации

### Требование 3: Получение данных о фильмах из TMDB API

**Пользовательская история:** Как система, я должна получать актуальную информацию о фильмах из внешнего источника, чтобы предоставлять пользователям полные данные.

#### Критерии приёмки

1. КОГДА Система запрашивает информацию о фильме, ТОГДА Система ДОЛЖНА отправить запрос к TMDB API и получить данные о фильме
2. КОГДА TMDB API возвращает данные о фильме, ТОГДА Система ДОЛЖНА извлечь название, описание, постер, жанры, актёров, режиссёров, год выпуска и рейтинг
3. КОГДА TMDB API недоступен или возвращает ошибку, ТОГДА Система ДОЛЖНА обработать ошибку и отобразить пользователю сообщение о временной недоступности данных
4. КОГДА Система получает список фильмов, ТОГДА Система ДОЛЖНА кэшировать данные для уменьшения количества запросов к API
5. КОГДА пользователь просматривает детальную информацию о фильме, ТОГДА Система ДОЛЖНА отобразить все полученные данные из TMDB

### Требование 4: Определение доступности фильмов на платформах

**Пользовательская история:** Как пользователь, я хочу видеть, на каких платформах доступен фильм для просмотра, чтобы быстро найти, где его посмотреть.

#### Критерии приёмки

1. КОГДА пользователь просматривает информацию о фильме, ТОГДА Система ДОЛЖНА запросить данные о доступности через API (например, JustWatch или TMDB providers)
2. КОГДА API возвращает список платформ, ТОГДА Система ДОЛЖНА отобразить названия и логотипы доступных сервисов (Netflix, Amazon Prime, Kinopoisk и др.)
3. КОГДА для фильма доступны ссылки на платформы, ТОГДА Система ДОЛЖНА предоставить кликабельные ссылки для перехода
4. КОГДА данные о доступности недоступны, ТОГДА Система ДОЛЖНА отобразить сообщение "Информация о доступности временно недоступна"
5. КОГДА фильм недоступен ни на одной платформе, ТОГДА Система ДОЛЖНА отобразить сообщение "Фильм в данный момент недоступен для онлайн-просмотра"

### Требование 5: Формирование персонализированных рекомендаций

**Пользовательская история:** Как пользователь, я хочу получать рекомендации фильмов на основе моих предпочтений и истории просмотров, чтобы находить интересные фильмы.

#### Критерии приёмки

1. КОГДА пользователь открывает главную страницу, ТОГДА Система ДОЛЖНА отобразить список рекомендованных фильмов на основе начальных предпочтений и истории просмотров
2. КОГДА пользователь оценивает просмотренные фильмы, ТОГДА Система ДОЛЖНА обновить алгоритм рекомендаций с учётом новых оценок
3. КОГДА у пользователя недостаточно данных для персонализации, ТОГДА Система ДОЛЖНА показать популярные фильмы из выбранных жанров
4. КОГДА пользователь добавляет фильм в избранное, ТОГДА Система ДОЛЖНА учитывать это при формировании будущих рекомендаций
5. КОГДА Система формирует рекомендации, ТОГДА Система ДОЛЖНА исключить фильмы, уже отмеченные как просмотренные

### Требование 6: Поиск фильмов

**Пользовательская история:** Как пользователь, я хочу искать фильмы по названию, жанру или актёрам, чтобы найти конкретный фильм или фильмы определённой категории.

#### Критерии приёмки

1. КОГДА пользователь вводит название фильма в поле поиска, ТОГДА Система ДОЛЖНА отобразить список фильмов, соответствующих запросу
2. КОГДА пользователь выбирает фильтр по жанру, ТОГДА Система ДОЛЖНА показать только фильмы выбранного жанра
3. КОГДА пользователь вводит имя актёра или режиссёра, ТОГДА Система ДОЛЖНА найти все фильмы с участием этого человека
4. КОГДА результаты поиска пусты, ТОГДА Система ДОЛЖНА отобразить сообщение "Ничего не найдено" и предложить изменить запрос
5. КОГДА пользователь комбинирует несколько фильтров, ТОГДА Система ДОЛЖНА применить все фильтры одновременно и показать соответствующие результаты

### Требование 7: Управление списком просмотренных фильмов

**Пользовательская история:** Как пользователь, я хочу отмечать фильмы как просмотренные и ставить им оценки, чтобы вести учёт просмотров и влиять на рекомендации.

#### Критерии приёмки

1. КОГДА пользователь нажимает кнопку "Отметить как просмотренный" на странице фильма, ТОГДА Система ДОЛЖНА добавить фильм в список просмотренных и сохранить дату просмотра
2. КОГДА пользователь ставит оценку фильму (число от 1 до 10), ТОГДА Система ДОЛЖНА сохранить оценку и связать её с фильмом в профиле пользователя
3. КОГДА пользователь изменяет оценку ранее просмотренного фильма, ТОГДА Система ДОЛЖНА обновить оценку в базе данных
4. КОГДА пользователь открывает список просмотренных фильмов, ТОГДА Система ДОЛЖНА отобразить все фильмы с датами просмотра и оценками
5. КОГДА пользователь удаляет фильм из списка просмотренных, ТОГДА Система ДОЛЖНА удалить запись и связанную оценку

### Требование 8: Управление списком избранного

**Пользовательская история:** Как пользователь, я хочу добавлять фильмы в избранное, чтобы быстро находить интересные фильмы, которые планирую посмотреть.

#### Критерии приёмки

1. КОГДА пользователь нажимает кнопку "Добавить в избранное" на странице фильма, ТОГДА Система ДОЛЖНА добавить фильм в список избранного
2. КОГДА фильм уже находится в избранном, ТОГДА Система ДОЛЖНА отображать кнопку "Удалить из избранного"
3. КОГДА пользователь удаляет фильм из избранного, ТОГДА Система ДОЛЖНА удалить фильм из списка
4. КОГДА пользователь открывает страницу избранного, ТОГДА Система ДОЛЖНА отобразить все сохранённые фильмы с постерами и краткой информацией
5. КОГДА список избранного пуст, ТОГДА Система ДОЛЖНА отобразить сообщение "Ваш список избранного пуст"

### Требование 9: Отображение статистики просмотров

**Пользовательская история:** Как пользователь, я хочу видеть статистику своих просмотров, чтобы анализировать свои предпочтения и отслеживать активность.

#### Критерии приёмки

1. КОГДА пользователь открывает страницу статистики, ТОГДА Система ДОЛЖНА отобразить общее количество просмотренных фильмов
2. КОГДА Система рассчитывает общее время просмотра, ТОГДА Система ДОЛЖНА суммировать длительность всех просмотренных фильмов и отобразить результат в часах и минутах
3. КОГДА Система определяет любимых режиссёров, ТОГДА Система ДОЛЖНА проанализировать просмотренные фильмы и показать топ-5 режиссёров по количеству просмотров и средней оценке
4. КОГДА Система определяет любимых актёров, ТОГДА Система ДОЛЖНА проанализировать просмотренные фильмы и показать топ-5 актёров по количеству просмотров и средней оценке
5. КОГДА у пользователя нет просмотренных фильмов, ТОГДА Система ДОЛЖНА отобразить сообщение "Начните смотреть фильмы, чтобы увидеть статистику"

### Требование 10: Переключение темы оформления

**Пользовательская история:** Как пользователь, я хочу переключаться между светлой и тёмной темой, чтобы использовать приложение комфортно в разное время суток.

#### Критерии приёмки

1. КОГДА пользователь нажимает кнопку переключения темы, ТОГДА Система ДОЛЖНА изменить цветовую схему интерфейса на противоположную
2. КОГДА пользователь выбирает тёмную тему, ТОГДА Система ДОЛЖНА применить тёмные цвета фона и светлый текст ко всем элементам интерфейса
3. КОГДА пользователь выбирает светлую тему, ТОГДА Система ДОЛЖНА применить светлые цвета фона и тёмный текст ко всем элементам интерфейса
4. КОГДА пользователь переключает тему, ТОГДА Система ДОЛЖНА сохранить выбор в локальном хранилище браузера
5. КОГДА пользователь возвращается в приложение, ТОГДА Система ДОЛЖНА применить ранее выбранную тему автоматически

### Требование 11: Адаптивный дизайн

**Пользовательская история:** Как пользователь, я хочу использовать приложение на разных устройствах, чтобы иметь доступ к функциям с компьютера, планшета или смартфона.

#### Критерии приёмки

1. КОГДА пользователь открывает приложение на мобильном устройстве, ТОГДА Система ДОЛЖНА отобразить адаптированный интерфейс с учётом размера экрана
2. КОГДА пользователь открывает приложение на планшете, ТОГДА Система ДОЛЖНА оптимизировать расположение элементов для среднего размера экрана
3. КОГДА пользователь открывает приложение на десктопе, ТОГДА Система ДОЛЖНА использовать полную ширину экрана для отображения контента
4. КОГДА пользователь изменяет размер окна браузера, ТОГДА Система ДОЛЖНА динамически адаптировать интерфейс
5. КОГДА интерфейс адаптируется, ТОГДА Система ДОЛЖНА сохранять читаемость текста и доступность всех функций

## Технические требования

### Технологический стек

- **Фронтенд:** React (последняя стабильная версия)
- **Бэкенд:** Node.js версии 16
- **База данных:** Supabase (PostgreSQL)
- **API для данных о фильмах:** TMDB API
- **API для доступности фильмов:** JustWatch API или TMDB Watch Providers
- **Аутентификация:** Supabase Auth
- **Стилизация:** CSS Modules / Styled Components / Tailwind CSS (на выбор разработчика)

### Нефункциональные требования

1. **Производительность:** Время загрузки главной страницы не должно превышать 3 секунд
2. **Безопасность:** Пароли должны храниться в зашифрованном виде через Supabase Auth
3. **Доступность:** Интерфейс должен быть доступен для пользователей с ограниченными возможностями (базовая поддержка ARIA)
4. **Кроссбраузерность:** Приложение должно корректно работать в Chrome, Firefox, Safari, Edge последних версий
5. **Масштабируемость:** Архитектура должна позволять добавление новых функций без значительной переработки кода

## Ограничения

1. Проект разрабатывается как школьный, поэтому акцент на демонстрацию функционала, а не на коммерческое использование
2. Использование бесплатных тарифов TMDB API и Supabase
3. Ограничение количества запросов к внешним API согласно их лимитам
4. Разработка ведётся на Node.js версии 16 (требование проекта)

## Этапы разработки

1. Настройка проекта и базовой структуры
2. Интеграция с Supabase и настройка аутентификации
3. Интеграция с TMDB API
4. Разработка системы рекомендаций
5. Реализация функционала списков (просмотренные, избранное)
6. Разработка страницы статистики
7. Реализация поиска и фильтрации
8. Разработка адаптивного дизайна и тем оформления
9. Тестирование и отладка
10. Финальная оптимизация и документация
